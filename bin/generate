#!/usr/bin/env node
var program = require('commander');
var chalk = require('chalk');

program
  .option('-u, --url <url>', 'URL to fetch API spec from')
  .option('-r, --root <url>', 'URL for root of generated code urls')
  .option('-v, --version [version]', 'Version of the API [*]', '*')
  .option('-l, --lang [lang]', 'Language of generated client [js]', 'js')
  .option('-o, --output <dir>', 'Output directory [cwd]', '.')
  .option('-d, --debug', 'Output debug information')
  .parse(process.argv);

if (program.debug) { process.env.DEBUG = '*'; }

var main = require('../lib/main');
main({
  url: program.url,
  root: program.root || program.url,
  version: program.version,
  lang: program.lang,
  output: program.output
})
.then(function () {
  console.log('%s', chalk.bold.green('Success'));
})
.catch(function (err) {
  console.log('%s: %s', chalk.bold.red('Error'), err.stack);
});
